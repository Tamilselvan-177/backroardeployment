{% extends "base.twig" %}

{% block title %}Add Category — Admin{% endblock %}

{% block styles %}
<style>
    @keyframes fadeUpAdmin {
        from { opacity:0; transform:translateY(18px); }
        to   { opacity:1; transform:translateY(0); }
    }
    .admin-form-shell{
        background: radial-gradient(circle at top, #f9fafb 0%, #e5e7eb 40%, #f3f4f6 100%);
        min-height: calc(100vh - 64px);
    }
    .admin-form-card{
        background:#ffffff;
        border-radius:1.1rem;
        box-shadow:0 18px 40px rgba(15,23,42,0.12),0 0 0 1px rgba(148,163,184,0.25);
        border:1px solid rgba(148,163,184,0.5);
        animation:fadeUpAdmin .4s ease-out;
    }
    .admin-label{
        font-size:.75rem;
        text-transform:uppercase;
        letter-spacing:.14em;
        color:#6b7280;
        font-weight:600;
    }
    .admin-input{
        border-radius:.8rem;
        border:1px solid var(--card-border);
        padding:.6rem .9rem;
        font-size:.85rem;
        width:100%;
    }
    .admin-input:focus{
        outline:none;
        border-color:#111827;
        box-shadow:0 0 0 1px #111827,0 0 0 3px rgba(15,23,42,0.12);
    }
</style>
{% endblock %}

{% block content %}
<section class="admin-form-shell py-8">
    <div class="container mx-auto px-4">
        <div class="flex items-center justify-between mb-6">
            <div class="flex items-center gap-3">
                <a href="{{ app_url }}/admin"
                   class="px-3 py-1 rounded-full border border-[var(--card-border)] text-[11px] font-semibold text-gray-600 hover:bg-[var(--card-bg-alt)]">
                    ← Dashboard
                </a>
                <div>
                    <p class="admin-label mb-1">Admin / Categories</p>
                    <h1 class="text-2xl md:text-3xl font-black tracking-[0.14em] uppercase text-[var(--brand-heading)]">
                        Add Category
                    </h1>
                </div>
            </div>
            <a href="{{ app_url }}/admin/categories"
               class="px-4 py-2 rounded-full border border-[var(--card-border)] text-xs font-semibold text-gray-700 hover:bg-[var(--card-bg-alt)]">
                Back to list
            </a>
        </div>

        {% if errors %}
            <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 mb-4 rounded-lg text-sm">
                <ul class="list-disc pl-5 space-y-1">
                    {% for err in errors %}
                        <li>{{ err }}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}

        <form action="{{ app_url }}/admin/categories"
              method="post"
              enctype="multipart/form-data"
              class="admin-form-card grid grid-cols-1 md:grid-cols-2 gap-6 p-6 md:p-8">

            <input type="hidden" name="_token" value="{{ csrf_token }}">

            <div>
                <label class="admin-label mb-1">Name</label>
                <input type="text" name="name"
                       value="{{ old.name ?? '' }}"
                       class="admin-input" required>
            </div>

            <div>
                <label class="admin-label mb-1">Slug</label>
                <input type="text" name="slug"
                       value="{{ old.slug ?? '' }}"
                       class="admin-input">
            </div>

            <div>
                <label class="admin-label mb-1">Display Order</label>
                <input type="number" name="display_order"
                       value="{{ old.display_order ?? 0 }}"
                       class="admin-input">
            </div>

            <div class="flex items-center text-xs mt-6 md:mt-0">
                <label class="flex items-center space-x-2">
                    <input type="checkbox" name="is_active" checked>
                    <span>Active</span>
                </label>
            </div>

            <div class="md:col-span-2">
                <label class="admin-label mb-2">Category Image</label>
                <input type="file"
                       name="image"
                       accept="image/*"
                       onchange="previewImage(event)"
                       class="admin-input">
                <p class="text-xs text-gray-500 mt-1">
                    Optional. Square image recommended (e.g. 600×600px).
                </p>
                <div class="mt-4">
                    <img id="imgPreview"
                         src="#"
                         style="display:none;"
                         class="w-32 h-32 object-cover rounded border" />
                </div>
            </div>

            <div class="md:col-span-2 flex justify-end">
                <button class="px-6 py-2 rounded-full bg-[var(--brand-navbar)] text-white text-xs font-semibold hover:bg-black">
                    Create Category
                </button>
            </div>
        </form>
    </div>
</section>

<script>
function previewImage(event) {
    const img = document.getElementById('imgPreview');
    if (event.target.files && event.target.files[0]) {
        img.src = URL.createObjectURL(event.target.files[0]);
        img.style.display = 'block';
    } else {
        img.style.display = 'none';
    }
}
</script>
{% endblock %}
